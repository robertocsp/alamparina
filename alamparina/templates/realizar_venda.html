{% extends "includes/layout_principal_operacional.html" %}
{% block tituloPagina %}<i class="fa fa-fw fa-bar-chart-o"></i> Efetuar Venda {% endblock %}

{% block Vendas %}active{% endblock %}

{% block conteudo %}
<div class="box-formulario">
    <p><i class="glyphicon glyphicon-info-sign"></i> Preencha corretamente os campos abaixo e clique em Efetuar Venda para efetuar a venda.</p>
    <form class="formulario-padrao venda" id="form_realizar_venda">{% csrf_token %}
        <ul>
        <li>
            <label for="id_dtrealizado">Data da venda:</label>
                {% if dtrealizado_retorno != None %}
                    <input type="text" class="data" id="id_dtrealizado" placeholder="Dia da Venda..." name="dtrealizado" value="{{dtrealizado_retorno}}">
                {% else %}
                    <input type="text" class="data" id="id_dtrealizado" placeholder="Dia da Venda..." name="dtrealizado" value="">
                {% endif %}
        </li>
        <li>
            <label for="id_marcas">Marcas: </label>
            <select id="id_marcas" name="marca" onchange="form.submit()">
                <option value="">Selecione uma marca</option>
                {% for marca in marca_list %}
                {% if marca_retorno != None and marca_retorno.id == marca.id  %}
                <option value="{{marca.id}}" selected>{{marca.nome}}</option>
                {% else %}
                <option value="{{marca.id}}">{{marca.nome}}</option>
                {% endif %}
                {% endfor %}
            </select>
        </li>
        <li>
            <label for="id_unidades">Unidades: </label>
            <select id="id_unidades" name="unidade" onchange="form.submit()">
                <option value="">Selecione uma unidade</option>
                {% for unidade in unidade_list %}
                {% if unidade_retorno != None and unidade_retorno.id == unidade.id  %}
                <option value="{{unidade.id}}" selected>{{unidade.nome}}</option>
                {% else %}
                <option value="{{unidade.id}}">{{unidade.nome}}</option>
                {% endif %}
                {% endfor %}
            </select>
            {% if error %}
                <br><br>
                <div class="alert alert-danger">
                    <strong><i class="glyphicon glyphicon-info-sign"></i> Quantidade superior a de estoque ({{estoque.quantidade}})</strong>
                </div>
            {% endif %}
        </li>
        <li>
            <label for="id_canais">Canais: </label>
            <select id="id_canais" name="canal" onchange="form.submit()">
                <option value="">Selecione um canal</option>
                {% for canal in canal_list %}
                {% if canal_retorno != None and canal_retorno.id == canal.id  %}
                <option value="{{canal.id}}" selected>{{canal.nome}}</option>
                {% else %}
                <option value="{{canal.id}}">{{canal.nome}}</option>
                {% endif %}
                {% endfor %}
            </select>
            {% if error %}
                <br><br>
                <div class="alert alert-danger">
                    <strong><i class="glyphicon glyphicon-info-sign"></i> Erro no canal</strong>
                </div>
            {% endif %}
        </li>
        <li>
            <label for="id_produtos">Produtos: </label>
            <select id="id_produtos" name="produto" onchange="form.submit()">
                <option value="">Selecione uma produto</option>
                {% for produto in produto_list %}
                {% if produto_retorno != None and produto_retorno.id == produto.id  %}
                <option value="{{produto.id}}" selected>{{produto.nome}}</option>
                {% else %}
                <option value="{{produto.id}}">{{produto.nome}}</option>
                {% endif %}
                {% endfor %}
            </select>
        </li>
        <li>
        </li>
            {% if preco_venda != None %}
            <label>Pre&ccedil;o do produto: R$ {{preco_venda|floatformat:2}}</label>
            {% else %}
            <label>Pre&ccedil;o do produto: </label>
            {% endif %}
        <li>
            <label for="id_quantidade">Quantidade: </label>
            <input type="number" id="id_quantidade" name="quantidade" class="numero">
        </li>
        <li>
            <label for="id_observacao">Observacao: </label>
            <textarea type="text" id="id_observacao" name="observacao"></textarea>
        </li>
        <li>
            <button type="button" onclick="submete_form()" value="Enviar" class="btn btn-primary"><span class="glyphicon glyphicon-ok"></span> Efetuar Venda</button>
        </li>
        </ul>
    </form>
    <a href="javascript:history.back();"><span class="seta-voltar" aria-hidden="true">&larr;</span> Voltar</a>
</div>

<script>
function submete_form(){
    form = document.getElementById("form_realizar_venda");
    form.method = "post";
    form.submit()
}
</script>
{% endblock %}